@using Microsoft.AspNetCore.Components.Routing
@inject DatabaseService DatabaseService

<MudPaper Width="250px" Elevation="0" Class="py-3">
    <MudText Typo="Typo.h6" Class="px-4 mud-text-secondary">@businessName</MudText>
    <MudDivider Class="my-2" />
    <MudNavMenu>

        @if (DeviceInfo.Platform == DevicePlatform.Android)
        {
            <MudNavLink Href="import-data" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.DataObject">Veri Ice Aktar</MudNavLink>
        }
        else
        {
        <MudNavLink Href="" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">Ana Sayfa</MudNavLink>
        <MudNavLink Href="customers" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.People">Musteriler</MudNavLink>
        <MudNavLink Href="transactions" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Receipt">Islemler</MudNavLink>
        <MudNavLink Href="settings" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Settings">Ayarlar</MudNavLink>
        }
    </MudNavMenu>
</MudPaper>

@code {
    private string businessName = "Kuyumcu";

    protected override async Task OnInitializedAsync()
    {
        var settings = await DatabaseService.GetSettingsAsync();
        if (!string.IsNullOrWhiteSpace(settings.BusinessName))
        {
            businessName = settings.BusinessName;
        }
    }
}
